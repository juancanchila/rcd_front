<!-- Toolbar -->
<mat-toolbar color="primary">
  <button mat-icon-button (click)="goBack()">
    <mat-icon>arrow_back</mat-icon>
  </button>
  <span class="toolbar-title">
    {{ generador?.razonSocial || generador?.primerNombre + ' ' + generador?.primerApellidos }}
  </span>
</mat-toolbar>

<!-- Contenido -->
<div class="content-wrapper" *ngIf="!loading">

  <!-- Card: Detalle Generador -->
  <mat-card *ngIf="generador" class="detalle-card">
    <mat-card-header>
      <mat-card-title>ðŸ“‹ Detalle del Generador</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <table class="tabla-detalle">
        <tr><th>ID:</th><td>{{ generador.id }}</td></tr>
        <tr><th>Tipo Documento:</th><td>{{ generador.tipoDocumento }}</td></tr>
        <tr><th>NÃºmero Documento:</th><td>{{ generador.numeroDocumento }}</td></tr>
        <tr><th>Primer Nombre:</th><td>{{ generador.primerNombre || 'â€”' }}</td></tr>
        <tr><th>Segundo Nombre:</th><td>{{ generador.segundoNombre || 'â€”' }}</td></tr>
        <tr><th>Primer Apellido:</th><td>{{ generador.primerApellidos || 'â€”' }}</td></tr>
        <tr><th>Segundo Apellido:</th><td>{{ generador.segundoApellido || 'â€”' }}</td></tr>
        <tr><th>RazÃ³n Social:</th><td>{{ generador.razonSocial }}</td></tr>
        <tr><th>Documento IdentificaciÃ³n:</th><td>{{ generador.documentoIdentificacion }}</td></tr>
        <tr><th>Documento RUT:</th><td>{{ generador.documentoRUT }}</td></tr>
        <tr><th>Tipo Registro:</th><td>{{ generador.tipoRegistro }}</td></tr>
        <tr><th>Contratista De:</th><td>{{ generador.contratistaDe }}</td></tr>
        <tr><th>DirecciÃ³n:</th><td>{{ generador.direccion }}</td></tr>
        <tr><th>Correo:</th><td>{{ generador.correoElectronico }}</td></tr>
        <tr><th>TelÃ©fono:</th><td>{{ generador.telefono }}</td></tr>
        <tr><th>Fax:</th><td>{{ generador.fax || 'â€”' }}</td></tr>
        <tr><th>Celular:</th><td>{{ generador.celular }}</td></tr>
        <tr><th>Clave:</th><td>{{ generador.clave }}</td></tr>
        <tr><th>CIIU:</th><td>{{ generador.ciiu }}</td></tr>
       <tr>
  <th>CÃ©dula o Certificado CÃ¡mara de Comercio:</th>
  <td>
    <a [href]="encodeUrl(generador.documentoIdentificacion)" target="_blank">
      {{ generador.documentoIdentificacion }}
    </a>
  </td>
</tr>

<tr>
  <th>RUT:</th>
  <td>
    <a [href]="encodeUrl(generador.documentoRUT)"  target="_blank">
      {{ generador.documentoRUT }}
    </a>
  </td>
</tr>

        <tr><th>Tipo Doc. RL:</th><td>{{ generador.tipoDocumentoRL }}</td></tr>
        <tr><th>NÃºmero Doc. RL:</th><td>{{ generador.numeroDocumentoRL }}</td></tr>
        <tr><th>Nombre RL:</th><td>{{ generador.nombreRL }}</td></tr>
        <tr><th>Email RL:</th><td>{{ generador.emailRL }}</td></tr>
      </table>
    </mat-card-content>
  </mat-card>

  <!-- Card: Proyectos -->
  <mat-card class="proyectos-card">
    <mat-card-header>
      <mat-card-title>ðŸ“‚ Proyectos del Generador</mat-card-title>
           <!-- â­ BotÃ³n agregar resolucion -->
  <button mat-icon-button color="primary"
          class="btn-add-resolucion"
          (click)="agregarResolucion()">
    <mat-icon>add_circle</mat-icon>
  </button>
    </mat-card-header>
 
    <mat-card-content>
      <table *ngIf="proyectos.length > 0" class="tabla-proyectos">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>UbicaciÃ³n</th>
            <th>Fecha Inicio</th>
            <th>Fecha Fin</th>
            <th>Estado</th>
            <th>Pin</th>
            <th>Ver PIN</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let proyecto of proyectos">
            <td>{{ proyecto.nombre }}</td>
            <td>{{ proyecto.ubicacion }}</td>
            <td>{{ proyecto.fechaInicio }}</td>
            <td>{{ proyecto.fechaFin }}</td>
            <td>{{ proyecto.estadoProyecto }}</td>
            <td>{{ proyecto.pin }}</td>
            <td>
              <button mat-icon-button (click)="goToPin(proyecto.id)" >
            <mat-icon>picture_as_pdf</mat-icon>
              </button>
            </td>
            <td>
              <button mat-icon-button (click)="goToDetalle(proyecto.id)">
                <mat-icon>search</mat-icon>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
      <p *ngIf="proyectos.length === 0" class="sin-datos">
        No hay proyectos registrados para este generador.
      </p>
    </mat-card-content>
  </mat-card>

</div>

<!-- Loader -->
<div *ngIf="loading" class="loader-wrapper">
  <mat-spinner></mat-spinner>
</div>
<br><br><br><br>
<!-- Footer -->
<shared-footer></shared-footer>
